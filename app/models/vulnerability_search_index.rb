# == Schema Information
#
# Table name: vulnerability_search_index
#
#  vulnerability_id :integer
#  document         :tsvector
#
# Indexes
#
#  index_vulnerability_search_index_on_document          (document)
#  index_vulnerability_search_index_on_vulnerability_id  (vulnerability_id) UNIQUE
#

class VulnerabilitySearchIndex < ActiveRecord::Base
  self.table_name = 'vulnerability_search_index'

  belongs_to :vulnerability

  def readonly?
    true
  end

  def self.refresh
    ActiveRecord::Base.connection.execute('REFRESH MATERIALIZED VIEW CONCURRENTLY vulnerability_search_index')
  end
end
